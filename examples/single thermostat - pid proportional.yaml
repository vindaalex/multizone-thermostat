climate:
  - platform: multizone_thermostat
    name: master
    unique_id: mz_master
    initial_hvac_mode: "off"
    initial_preset_mode: "none"
    room_area: 170 # 100+30+40=170
    passive_switch_check: True
    heat:
      entity_id: switch.fake_heater_master
      passive_switch_duration:
        hours: 5
      master_mode:
        satelites: [pid1, pid2, pid3]
        # operation_mode: "continuous"
        operation_mode: "balanced"
        control_interval:
          minutes: 30
        pwm_duration:
          minutes: 30
        pwm_scale: 100
        pwm_resolution: 20
        PID_valve_mode:
          goal: 80
          kp: -0.5
          ki: -0.001
          kd: 0

    restore_from_old_state: True
    restore_parameters: True
    restore_integral: True

  - platform: multizone_thermostat
    name: pid1
    unique_id: mz_pid1
    sensor: sensor.fake_sensor_1
    filter_mode: 3
    sensor_out: sensor.fake_sensor_out_1
    room_area: 100
    initial_hvac_mode: "off"
    precision: 0.1
    sensor_stale_duration:
      hours: 3
    passive_switch_check: True
    heat:
      entity_id: switch.fake_heater_switch1
      passive_switch_duration:
        days: 15
      away_temp: 12        
      proportional_mode:
        control_interval:
          minutes: 10 # 3*10=30 (30min=master)
        pwm_duration:
          minutes: 30 # equal to master
        pwm_scale: 100
        pwm_resolution: 20
        pwm_threshold: 5
        PID_mode:
          kp: 30
          ki: 0.003
          kd: -24000
          window_open_tempdrop: -3.6
        weather_mode:
          ka: 2
          kb: -10

    restore_from_old_state: True
    restore_parameters: True
    restore_integral: True

  - platform: multizone_thermostat
    name: pid2
    unique_id: mz_pid2
    sensor: sensor.fake_sensor_2
    filter_mode: 3
    room_area: 30
    initial_hvac_mode: "off"
    precision: 0.1
    sensor_stale_duration:
      hours: 3
    passive_switch_check: True
    heat:
      entity_id: switch.fake_heater_switch2
      passive_switch_duration:
        days: 15
      away_temp: 12        
      proportional_mode:
        control_interval:
          minutes: 15 # 2*15=30 (30min=master)
        pwm_duration:
          minutes: 30 # equal to master
        pwm_scale: 100
        pwm_resolution: 20
        pwm_threshold: 5
        PID_mode:
          kp: 30
          ki: 0.003
          kd: -24000
          window_open_tempdrop: -3.6

    restore_from_old_state: True
    restore_parameters: True
    restore_integral: True  

  - platform: multizone_thermostat
    name: pid3
    unique_id: mz_pid3
    sensor: sensor.fake_sensor_3
    filter_mode: 3
    sensor_out: sensor.fake_sensor_out_1
    room_area: 40
    initial_hvac_mode: "off"
    precision: 0.1
    sensor_stale_duration:
      hours: 3
    passive_switch_check: True
    heat:
      entity_id: input_number.fake_heater_switch4 # proportional valve
      passive_switch_duration:
        days: 15
      away_temp: 12        
      proportional_mode:
        control_interval:
          minutes: 10 # 3*10=30 (30min=master)
        # no pwm thus pwm=0 for proportional valve 0-100
        # pwm_duration:
        #   minutes: 30 # equal to master
        pwm_scale: 100
        pwm_resolution: 20
        pwm_threshold: 5
        PID_mode:
          kp: 15
          ki: 0.003
          kd: -15000
          window_open_tempdrop: -3.6
        weather_mode:
          ka: 2
          kb: -8

    restore_from_old_state: True
    restore_parameters: True
    restore_integral: True 

  - platform: multizone_thermostat
    name: pid4
    unique_id: mz_pid4
    sensor: sensor.fake_sensor_4
    filter_mode: 3
    sensor_out: sensor.fake_sensor_out_1
    room_area: 40
    initial_hvac_mode: "off"
    precision: 0.1
    sensor_stale_duration:
      hours: 3
    passive_switch_check: True
    heat:
      entity_id: input_number.fake_heater_switch4 # proportional valve
      passive_switch_duration:
        days: 15
      away_temp: 12        
      proportional_mode:
        control_interval:
          minutes: 15 # 2*15=30 (30min=master)
        # no pwm thus pwm=0 for proportional valve 0-100
        # pwm_duration:
        #   minutes: 30 # equal to master
        pwm_scale: 100
        pwm_resolution: 20
        pwm_threshold: 5
        PID_mode:
          kp: 20
          ki: 0.003
          kd: -15000
          window_open_tempdrop: -3.6
        weather_mode:
          ka: 2
          kb: -8

    restore_from_old_state: True
    restore_parameters: True
    restore_integral: True   


  - platform: multizone_thermostat
    name: pid5
    unique_id: mz_pid5
    sensor: sensor.fake_sensor_5
    filter_mode: 3
    room_area: 40
    initial_hvac_mode: "off"
    precision: 0.1
    sensor_stale_duration:
      hours: 3
    passive_switch_check: True
    heat:
      entity_id: switch.fake_heater_switch5 # proportional valve
      passive_switch_duration:
        days: 15
      away_temp: 12        
      proportional_mode:
        control_interval:
          minutes: 30 # (30min=master)
        pwm_duration:
          minutes: 30 # equal to master
        pwm_scale: 100
        pwm_resolution: 50
        pwm_threshold: 5
        PID_mode:
          kp: 20
          ki: 0.003
          kd: -15000
          window_open_tempdrop: -3.6

    restore_from_old_state: True
    restore_parameters: True
    restore_integral: True